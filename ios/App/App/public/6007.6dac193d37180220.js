"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6007],{6007:(v,p,s)=>{s.r(p),s.d(p,{SeluruhAlatAdminPageRoutingModule:()=>E});var g=s(4670),c=s(5861),_=s(7394),t=s(6689),D=s(3454),m=s(4338),d=s(5175),l=s(6814),a=s(7852);function o(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(16);t.Q6J("ngTemplateOutlet",e)}}function u(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(16);t.Q6J("ngTemplateOutlet",e)}}function h(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(16);t.Q6J("ngTemplateOutlet",e)}}function f(n,i){if(1&n&&(t.TgZ(0,"ion-select-option",16),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.s9C("value",null==e?null:e.name),t.xp6(1),t.Oqu(null==e?null:e.name)}}function S(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",13),t._uU(3,"Pilih Instalasi"),t.qZA(),t.TgZ(4,"ion-list")(5,"ion-item")(6,"ion-select",14),t.NdJ("ionChange",function(A){t.CHM(e);const T=t.oxw();return t.KtG(T.handleInstalasi(A))}),t.YNc(7,f,2,2,"ion-select-option",15),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.allInstalasi)}}function x(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(9);t.Q6J("ngTemplateOutlet",e)}}function b(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(11);t.Q6J("ngTemplateOutlet",e)}}function w(n,i){if(1&n&&(t.TgZ(0,"ion-label",28),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function P(n,i){if(1&n&&(t.TgZ(0,"ion-label",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function Z(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(29);t.Q6J("ngTemplateOutlet",e)}}function C(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(25);t.Q6J("ngTemplateOutlet",e)}}function O(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(27);t.Q6J("ngTemplateOutlet",e)}}function y(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(23);t.Q6J("ngTemplateOutlet",e)}}function I(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(31);t.Q6J("ngTemplateOutlet",e)}}function L(n,i){if(1&n&&t.GkF(0,12),2&n){t.oxw();const e=t.MAs(21);t.Q6J("ngTemplateOutlet",e)}}function M(n,i){1&n&&(t.TgZ(0,"ion-button",30),t._uU(1,"Tdk Layak"),t.qZA())}function F(n,i){1&n&&(t.TgZ(0,"ion-button",30),t._uU(1,"Dalam Perbaikan"),t.qZA())}function J(n,i){1&n&&(t.TgZ(0,"ion-button",31),t._uU(1,"Menggu Spare."),t.qZA())}function U(n,i){1&n&&(t.TgZ(0,"ion-button",32),t._uU(1,"Pakai"),t.qZA())}function G(n,i){1&n&&(t.TgZ(0,"ion-button",33),t._uU(1,"Default"),t.qZA())}function N(n,i){1&n&&(t.TgZ(0,"ion-button",29),t._uU(1,"Selesai Perb."),t.qZA())}function Q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-col",10),t._uU(3),t.qZA(),t.TgZ(4,"ion-col"),t.ynx(5,7),t.YNc(6,x,1,1,"ng-container",8),t.YNc(7,b,1,1,"ng-container",17),t.YNc(8,w,2,1,"ng-template",null,18,t.W1O),t.YNc(10,P,2,1,"ng-template",null,19,t.W1O),t.BQk(),t.qZA(),t.TgZ(12,"ion-col"),t.ynx(13,7),t.YNc(14,Z,1,1,"ng-container",8),t.YNc(15,C,1,1,"ng-container",8),t.YNc(16,O,1,1,"ng-container",8),t.YNc(17,y,1,1,"ng-container",8),t.YNc(18,I,1,1,"ng-container",8),t.YNc(19,L,1,1,"ng-container",8),t.BQk(),t.YNc(20,M,2,0,"ng-template",null,20,t.W1O),t.YNc(22,F,2,0,"ng-template",null,21,t.W1O),t.YNc(24,J,2,0,"ng-template",null,22,t.W1O),t.YNc(26,U,2,0,"ng-template",null,23,t.W1O),t.YNc(28,G,2,0,"ng-template",null,24,t.W1O),t.YNc(30,N,2,0,"ng-template",null,25,t.W1O),t.qZA()(),t.TgZ(32,"ion-item-options",26)(33,"ion-item-option",27),t.NdJ("click",function(){const T=t.CHM(e).$implicit,Y=t.oxw();return t.KtG(Y.deleteItem(null==T?null:T.id))}),t._uU(34,"Delete"),t.qZA()()()}if(2&n){const e=i.$implicit,r=i.index;t.xp6(3),t.Oqu(r+1),t.xp6(2),t.Q6J("ngSwitch",null==e?null:e.owner_id),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(7),t.Q6J("ngSwitch",null==e?null:e.monitoring_status),t.xp6(1),t.Q6J("ngSwitchCase",null),t.xp6(1),t.Q6J("ngSwitchCase","menunggu_sparepart"),t.xp6(1),t.Q6J("ngSwitchCase","layak_pakai"),t.xp6(1),t.Q6J("ngSwitchCase","sedang_dalam_perbaikan"),t.xp6(1),t.Q6J("ngSwitchCase","selesai_perbaikan"),t.xp6(1),t.Q6J("ngSwitchCase","gagal_perbaikan")}}const k=[{path:"",component:(()=>{class n{constructor(e,r,A){this.global=e,this.seluruhAlatServices=r,this.authServices=A,this.formTitle="Seluruh Alat",this.allContentDummy=[],this.allContentDummySub=new _.w0,this.isLoading=!1,this.allAlatData=[],this._allAlatData=[],this.allAlatDataSub=new _.w0,this.allInstalasi=[],this.allInstalasiSubs=new _.w0}ngOnInit(){this.getAuth(),this.allInstalasiSubs=this.seluruhAlatServices.allAllInstalasi.subscribe(e=>{this.allInstalasi=e instanceof Array?e:this.allInstalasi.concat(e)}),this.allAlatDataSub=this.seluruhAlatServices.allDataAlatKesehatan.subscribe(e=>{e instanceof Array?(this.allAlatData=e,this._allAlatData=e):this.allAlatData=this.allAlatData.concat(e)}),this.getAllData()}deleteItem(e){this.isLoading=!0,this.global.showLoader(),this.seluruhAlatServices.deleteAlat(e,this.token),this.isLoading=!1,this.global.hideLoader(),this.getAllData()}handleInstalasi(e){let r=this._allAlatData;r=r.filter(A=>A.room==e.detail.value),this.allAlatData=r}handleRefresh(e){setTimeout(()=>{this.allAlatDataSub=this.seluruhAlatServices.allDataAlatKesehatan.subscribe(r=>{this.allAlatData=r instanceof Array?r:this.allAlatData.concat(r)}),this.getAllData(),e.target.complete()},2e3)}getAuth(){var e=this;return(0,c.Z)(function*(){const r=yield e.authServices.getId();if(r){let A=JSON.parse(r);e.roles=A.role,console.log("roles",e.roles),e.token=A.access_token}})()}getAllData(){var e=this;return(0,c.Z)(function*(){e.isLoading=!0,e.global.showLoader(),setTimeout((0,c.Z)(function*(){yield e.seluruhAlatServices.getSeluruhAlatData(e.token),yield e.seluruhAlatServices.getInstalasi()}),1e3),e.isLoading=!1,e.global.hideLoader()})()}ngOnDestroy(){this.allContentDummySub&&this.allContentDummySub.unsubscribe(),this.allAlatDataSub&&this.allAlatDataSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.U),t.Y36(m.G),t.Y36(d.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-seluruh-alat-admin"]],decls:27,vars:7,consts:[[3,"translucent"],["mode","md","color","success"],["slot","start"],["autoHide","true"],["slot","end"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["nameDefaultRoles",""],["size","2"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],[1,"ctm-font"],["placeholder","Silahkan Masukkan Instalasi",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["nameDefaultRow",""],["kso",""],["Danger",""],["sedangDalamPerbaikan",""],["masaWarning",""],["siapPakai",""],["default",""],["selesaiPerbaikan",""],["side","end"],["color","danger","expandable","",1,"ctm-font",3,"click"],["size","small","color","dark",1,"ctm-font"],["size","small","color","primary",1,"ctm-font"],["size","small","color","danger",1,"ctm-font"],["size","small","color","warning",1,"ctm-font"],["size","small","color","success",1,"ctm-font"],["size","small",1,"ctm-font"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",2),t._UZ(5,"ion-menu-button",3),t.qZA(),t._UZ(6,"ion-buttons",4),t.qZA()(),t.TgZ(7,"ion-content",5)(8,"ion-refresher",6),t.NdJ("ionRefresh",function(T){return r.handleRefresh(T)}),t._UZ(9,"ion-refresher-content"),t.qZA(),t.TgZ(10,"ion-grid"),t.ynx(11,7),t.YNc(12,o,1,1,"ng-container",8),t.YNc(13,u,1,1,"ng-container",8),t.YNc(14,h,1,1,"ng-container",8),t.YNc(15,S,8,1,"ng-template",null,9,t.W1O),t.BQk(),t.qZA(),t.TgZ(17,"ion-grid")(18,"ion-row")(19,"ion-col",10),t._uU(20," No"),t.qZA(),t.TgZ(21,"ion-col"),t._uU(22," Alat"),t.qZA(),t.TgZ(23,"ion-col"),t._uU(24,"Status"),t.qZA()()(),t.TgZ(25,"ion-list"),t.YNc(26,Q,35,10,"ion-item-sliding",11),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.hij(" ",r.formTitle," "),t.xp6(8),t.Q6J("ngSwitch",r.roles),t.xp6(1),t.Q6J("ngSwitchCase","ADMIN"),t.xp6(1),t.Q6J("ngSwitchCase","KATIM"),t.xp6(1),t.Q6J("ngSwitchCase","BPFK"),t.xp6(12),t.Q6J("ngForOf",r.allAlatData))},dependencies:[l.sg,l.tP,l.RF,l.n9,l.ED,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.Ie,a.u8,a.IK,a.td,a.Q$,a.q_,a.fG,a.nJ,a.Wo,a.Nd,a.t9,a.n0,a.wd,a.sr,a.QI]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(k),g.Bz]}),n})()},3454:(v,p,s)=>{s.d(p,{U:()=>D});var g=s(5861),c=s(6689),_=s(7852),t=s(6593);let D=(()=>{class m{constructor(l,a,o,u,h,f){this.alertCtrl=l,this.toastCtrl=a,this.loadingCtrl=o,this.modalCtrl=u,this.sanitizer=h,this.navCtrl=f,this.isLoading=!1}setLoader(){this.isLoading=!this.isLoading}showAlert(l,a,o){this.alertCtrl.create({header:a||"Authentication failed",message:l,buttons:o||["Okay"]}).then(u=>u.present())}showToast(l,a,o,u=3e3){var h=this;return(0,g.Z)(function*(){(yield h.toastCtrl.create({message:l,duration:u,color:a,position:o})).present()})()}errorToast(l,a=4e3){this.showToast(l||"No Internet Connection","danger","bottom",a)}successToast(l){this.showToast(l,"success","bottom")}showLoader(l,a){return this.isLoading||this.setLoader(),this.loadingCtrl.create({message:l,spinner:a||"bubbles"}).then(o=>{o.present().then(()=>{this.isLoading||o.dismiss().then(()=>{console.log("abort presenting")})})}).catch(o=>{console.log("show loading error: ",o)})}hideLoader(){return this.isLoading&&this.setLoader(),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(l=>console.log("error hide loader: ",l))}createModal(l){var a=this;return(0,g.Z)(function*(){const o=yield a.modalCtrl.create(l);yield o.present();const{data:u}=yield o.onWillDismiss();if(console.log(u),u)return u})()}modalDismiss(l){let a=l||null;console.log("data",a),this.modalCtrl.dismiss(a)}getIcon(l){switch(l.toLowerCase()){case"home":return"home-outline";case"work":return"briefcase-outline";default:return"location-outline"}}getSantizeUrl(l){return this.sanitizer.bypassSecurityTrustUrl(l)}apiErrorHandler(l){return l&&401==l.status&&l.error.error?(this.errorToast(l.error.error),this.navCtrl.navigateRoot("/login"),!1):l&&500==l.status&&l.error.error?(this.errorToast(l.error.error),!1):-1==l.status?(this.errorToast("Failed To Connect With Server"),!1):401==l.status?(this.errorToast("Unauthorized Request!"),localStorage.removeItem("token"),localStorage.removeItem("uid"),this.navCtrl.navigateRoot("/login"),!1):500==l.status?(this.errorToast("Something went wrong"),!1):422==l.status&&l.error.error?(this.errorToast(l.error.error),!1):(this.errorToast("Something went wrong"),!1)}show(l){var a=this;return(0,g.Z)(function*(){return a.isLoading=!0,yield a.loadingCtrl.create({message:l&&""!=l&&null!=l?l:"",spinner:"bubbles"}).then(o=>{o.present().then(()=>{a.isLoading||o.dismiss().then(()=>console.log("abort presenting"))})})})()}hide(){var l=this;return(0,g.Z)(function*(){return l.isLoading=!1,yield l.loadingCtrl.dismiss().then(()=>console.log("dismissed"))})()}}return m.\u0275fac=function(l){return new(l||m)(c.LFG(_.Br),c.LFG(_.yF),c.LFG(_.HT),c.LFG(_.IN),c.LFG(t.H7),c.LFG(_.SH))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},4338:(v,p,s)=>{s.d(p,{G:()=>m});var g=s(5861),c=s(5619),_=s(6689),t=s(6751),D=s(5819);let m=(()=>{class d{constructor(a,o){this.api=a,this.storage=o,this._allContentDummy=new c.X(null),this._allInstalasi=new c.X(null),this._allDataAlatKesehatan=new c.X(null),this.model=[],this.new_model=[]}get allContentDummy(){return this._allContentDummy.asObservable()}get allAllInstalasi(){return this._allInstalasi.asObservable()}get allDataAlatKesehatan(){return this._allDataAlatKesehatan.asObservable()}getSeluruhAlat(){return this.storage.getStorage("seluruhAlat")}getSeluruhAlatData(a){var o=this;return(0,g.Z)(function*(){try{o.api.getAllAlatKesehatan(a).then(function(){var h=(0,g.Z)(function*(f){const S=JSON.parse(f);yield o._allDataAlatKesehatan.next(S.data)});return function(f){return h.apply(this,arguments)}}())}catch(u){throw console.log(u),u}})()}deleteAlat(a,o){var u=this;return(0,g.Z)(function*(){try{let h=u.api.deleteAlatByID(a,o).then(function(){var f=(0,g.Z)(function*(S){JSON.parse(S)});return function(S){return f.apply(this,arguments)}}());console.log("deleteAlat",h)}catch(h){throw console.log(h),h}})()}getContentDummy(){try{this._allContentDummy.next(this.api.getViewListContent)}catch(a){throw console.log("getContentDummy",a),a}}getInstalasi(){try{this._allInstalasi.next(this.api.getInstalasi)}catch(a){throw console.log("instalasi",a),a}}}return d.\u0275fac=function(a){return new(a||d)(_.LFG(t.k),_.LFG(D.V))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);