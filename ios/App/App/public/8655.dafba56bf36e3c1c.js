"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8655],{8655:(v,p,r)=>{r.r(p),r.d(p,{SeluruhAlatPageModule:()=>R});var g=r(6814),_=r(95),s=r(7852),S=r(4670),A=r(5861),h=r(7394),t=r(6689),n=r(3454),l=r(4338),o=r(5175);function c(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(16);t.Q6J("ngTemplateOutlet",e)}}function m(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(16);t.Q6J("ngTemplateOutlet",e)}}function d(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(16);t.Q6J("ngTemplateOutlet",e)}}function T(a,i){if(1&a&&(t.TgZ(0,"ion-select-option",16),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.s9C("value",null==e?null:e.name),t.xp6(1),t.Oqu(null==e?null:e.name)}}function P(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",13),t._uU(3,"Pilih Instalasi"),t.qZA(),t.TgZ(4,"ion-list")(5,"ion-item")(6,"ion-select",14),t.NdJ("ionChange",function(f){t.CHM(e);const D=t.oxw();return t.KtG(D.handleInstalasi(f))}),t.YNc(7,T,2,2,"ion-select-option",15),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.allInstalasi)}}function x(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(9);t.Q6J("ngTemplateOutlet",e)}}function b(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(11);t.Q6J("ngTemplateOutlet",e)}}function w(a,i){if(1&a&&(t.TgZ(0,"ion-label",26),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function Z(a,i){if(1&a&&(t.TgZ(0,"ion-label",27),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function C(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(29);t.Q6J("ngTemplateOutlet",e)}}function O(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(25);t.Q6J("ngTemplateOutlet",e)}}function y(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(27);t.Q6J("ngTemplateOutlet",e)}}function I(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(23);t.Q6J("ngTemplateOutlet",e)}}function L(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(31);t.Q6J("ngTemplateOutlet",e)}}function M(a,i){if(1&a&&t.GkF(0,12),2&a){t.oxw();const e=t.MAs(21);t.Q6J("ngTemplateOutlet",e)}}function F(a,i){1&a&&(t.TgZ(0,"ion-button",28),t._uU(1,"Tdk Layak"),t.qZA())}function J(a,i){1&a&&(t.TgZ(0,"ion-button",28),t._uU(1,"Dalam Perbaikan"),t.qZA())}function U(a,i){1&a&&(t.TgZ(0,"ion-button",29),t._uU(1,"Menggu Spare."),t.qZA())}function G(a,i){1&a&&(t.TgZ(0,"ion-button",30),t._uU(1,"Pakai"),t.qZA())}function N(a,i){1&a&&(t.TgZ(0,"ion-button",31),t._uU(1,"Default"),t.qZA())}function Q(a,i){1&a&&(t.TgZ(0,"ion-button",27),t._uU(1,"Selesai Perb."),t.qZA())}function E(a,i){if(1&a&&(t.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-col",10),t._uU(3),t.qZA(),t.TgZ(4,"ion-col"),t.ynx(5,7),t.YNc(6,x,1,1,"ng-container",8),t.YNc(7,b,1,1,"ng-container",17),t.YNc(8,w,2,1,"ng-template",null,18,t.W1O),t.YNc(10,Z,2,1,"ng-template",null,19,t.W1O),t.BQk(),t.qZA(),t.TgZ(12,"ion-col"),t.ynx(13,7),t.YNc(14,C,1,1,"ng-container",8),t.YNc(15,O,1,1,"ng-container",8),t.YNc(16,y,1,1,"ng-container",8),t.YNc(17,I,1,1,"ng-container",8),t.YNc(18,L,1,1,"ng-container",8),t.YNc(19,M,1,1,"ng-container",8),t.BQk(),t.YNc(20,F,2,0,"ng-template",null,20,t.W1O),t.YNc(22,J,2,0,"ng-template",null,21,t.W1O),t.YNc(24,U,2,0,"ng-template",null,22,t.W1O),t.YNc(26,G,2,0,"ng-template",null,23,t.W1O),t.YNc(28,N,2,0,"ng-template",null,24,t.W1O),t.YNc(30,Q,2,0,"ng-template",null,25,t.W1O),t.qZA()()()),2&a){const e=i.$implicit,u=i.index;t.xp6(3),t.Oqu(u+1),t.xp6(2),t.Q6J("ngSwitch",null==e?null:e.owner_id),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(7),t.Q6J("ngSwitch",null==e?null:e.monitoring_status),t.xp6(1),t.Q6J("ngSwitchCase",null),t.xp6(1),t.Q6J("ngSwitchCase","menunggu_sparepart"),t.xp6(1),t.Q6J("ngSwitchCase","layak_pakai"),t.xp6(1),t.Q6J("ngSwitchCase","sedang_dalam_perbaikan"),t.xp6(1),t.Q6J("ngSwitchCase","selesai_perbaikan"),t.xp6(1),t.Q6J("ngSwitchCase","gagal_perbaikan")}}const Y=[{path:"",component:(()=>{class a{constructor(e,u,f){this.global=e,this.seluruhAlatServices=u,this.authServices=f,this.formTitle="Seluruh Alat",this.allContentDummy=[],this.allContentDummySub=new h.w0,this.isLoading=!1,this.allAlatData=[],this._allAlatData=[],this.allAlatDataSub=new h.w0,this.allInstalasi=[],this.allInstalasiSubs=new h.w0}ngOnInit(){this.getAuth(),this.allInstalasiSubs=this.seluruhAlatServices.allAllInstalasi.subscribe(e=>{this.allInstalasi=e instanceof Array?e:this.allInstalasi.concat(e)}),this.allAlatDataSub=this.seluruhAlatServices.allDataAlatKesehatan.subscribe(e=>{e instanceof Array?(this.allAlatData=e,this._allAlatData=e):this.allAlatData=this.allAlatData.concat(e)}),this.getAllData()}deleteItem(e){this.isLoading=!0,this.global.showLoader(),this.seluruhAlatServices.deleteAlat(e,this.token),this.isLoading=!1,this.global.hideLoader(),this.getAllData()}handleInstalasi(e){let u=this._allAlatData;u=u.filter(f=>f.room==e.detail.value),this.allAlatData=u}handleRefresh(e){setTimeout(()=>{this.allAlatDataSub=this.seluruhAlatServices.allDataAlatKesehatan.subscribe(u=>{this.allAlatData=u instanceof Array?u:this.allAlatData.concat(u)}),this.getAllData(),e.target.complete()},2e3)}getAuth(){var e=this;return(0,A.Z)(function*(){const u=yield e.authServices.getId();if(u){let f=JSON.parse(u);e.roles=f.role,console.log("roles",e.roles),e.token=f.access_token}})()}getAllData(){var e=this;return(0,A.Z)(function*(){e.isLoading=!0,e.global.showLoader(),setTimeout((0,A.Z)(function*(){yield e.seluruhAlatServices.getSeluruhAlatData(e.token),yield e.seluruhAlatServices.getInstalasi()}),1e3),e.isLoading=!1,e.global.hideLoader()})()}ngOnDestroy(){this.allContentDummySub&&this.allContentDummySub.unsubscribe(),this.allAlatDataSub&&this.allAlatDataSub.unsubscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.U),t.Y36(l.G),t.Y36(o.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-seluruh-alat"]],decls:27,vars:7,consts:[[3,"translucent"],["mode","md","color","success"],["slot","start"],["autoHide","true"],["slot","end"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["nameDefaultRoles",""],["size","2"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],[1,"ctm-font"],["placeholder","Silahkan Masukkan Instalasi",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["nameDefaultRow",""],["kso",""],["Danger",""],["sedangDalamPerbaikan",""],["masaWarning",""],["siapPakai",""],["default",""],["selesaiPerbaikan",""],["size","small","color","dark",1,"ctm-font"],["size","small","color","primary",1,"ctm-font"],["size","small","color","danger",1,"ctm-font"],["size","small","color","warning",1,"ctm-font"],["size","small","color","success",1,"ctm-font"],["size","small",1,"ctm-font"]],template:function(e,u){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",2),t._UZ(5,"ion-menu-button",3),t.qZA(),t._UZ(6,"ion-buttons",4),t.qZA()(),t.TgZ(7,"ion-content",5)(8,"ion-refresher",6),t.NdJ("ionRefresh",function(D){return u.handleRefresh(D)}),t._UZ(9,"ion-refresher-content"),t.qZA(),t.TgZ(10,"ion-grid"),t.ynx(11,7),t.YNc(12,c,1,1,"ng-container",8),t.YNc(13,m,1,1,"ng-container",8),t.YNc(14,d,1,1,"ng-container",8),t.YNc(15,P,8,1,"ng-template",null,9,t.W1O),t.BQk(),t.qZA(),t.TgZ(17,"ion-grid")(18,"ion-row")(19,"ion-col",10),t._uU(20," No"),t.qZA(),t.TgZ(21,"ion-col"),t._uU(22," Alat"),t.qZA(),t.TgZ(23,"ion-col"),t._uU(24,"Status"),t.qZA()()(),t.TgZ(25,"ion-list"),t.YNc(26,E,32,10,"ion-item-sliding",11),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.hij(" ",u.formTitle," "),t.xp6(8),t.Q6J("ngSwitch",u.roles),t.xp6(1),t.Q6J("ngSwitchCase","ADMIN"),t.xp6(1),t.Q6J("ngSwitchCase","KATIM"),t.xp6(1),t.Q6J("ngSwitchCase","BPFK"),t.xp6(12),t.Q6J("ngForOf",u.allAlatData))},dependencies:[g.sg,g.tP,g.RF,g.n9,g.ED,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.Ie,s.td,s.Q$,s.q_,s.fG,s.nJ,s.Wo,s.Nd,s.t9,s.n0,s.wd,s.sr,s.QI]}),a})()}];let k=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[S.Bz.forChild(Y),S.Bz]}),a})(),R=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,_.u5,s.Pc,k]}),a})()},3454:(v,p,r)=>{r.d(p,{U:()=>A});var g=r(5861),_=r(6689),s=r(7852),S=r(6593);let A=(()=>{class h{constructor(n,l,o,c,m,d){this.alertCtrl=n,this.toastCtrl=l,this.loadingCtrl=o,this.modalCtrl=c,this.sanitizer=m,this.navCtrl=d,this.isLoading=!1}setLoader(){this.isLoading=!this.isLoading}showAlert(n,l,o){this.alertCtrl.create({header:l||"Authentication failed",message:n,buttons:o||["Okay"]}).then(c=>c.present())}showToast(n,l,o,c=3e3){var m=this;return(0,g.Z)(function*(){(yield m.toastCtrl.create({message:n,duration:c,color:l,position:o})).present()})()}errorToast(n,l=4e3){this.showToast(n||"No Internet Connection","danger","bottom",l)}successToast(n){this.showToast(n,"success","bottom")}showLoader(n,l){return this.isLoading||this.setLoader(),this.loadingCtrl.create({message:n,spinner:l||"bubbles"}).then(o=>{o.present().then(()=>{this.isLoading||o.dismiss().then(()=>{console.log("abort presenting")})})}).catch(o=>{console.log("show loading error: ",o)})}hideLoader(){return this.isLoading&&this.setLoader(),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(n=>console.log("error hide loader: ",n))}createModal(n){var l=this;return(0,g.Z)(function*(){const o=yield l.modalCtrl.create(n);yield o.present();const{data:c}=yield o.onWillDismiss();if(console.log(c),c)return c})()}modalDismiss(n){let l=n||null;console.log("data",l),this.modalCtrl.dismiss(l)}getIcon(n){switch(n.toLowerCase()){case"home":return"home-outline";case"work":return"briefcase-outline";default:return"location-outline"}}getSantizeUrl(n){return this.sanitizer.bypassSecurityTrustUrl(n)}apiErrorHandler(n){return n&&401==n.status&&n.error.error?(this.errorToast(n.error.error),this.navCtrl.navigateRoot("/login"),!1):n&&500==n.status&&n.error.error?(this.errorToast(n.error.error),!1):-1==n.status?(this.errorToast("Failed To Connect With Server"),!1):401==n.status?(this.errorToast("Unauthorized Request!"),localStorage.removeItem("token"),localStorage.removeItem("uid"),this.navCtrl.navigateRoot("/login"),!1):500==n.status?(this.errorToast("Something went wrong"),!1):422==n.status&&n.error.error?(this.errorToast(n.error.error),!1):(this.errorToast("Something went wrong"),!1)}show(n){var l=this;return(0,g.Z)(function*(){return l.isLoading=!0,yield l.loadingCtrl.create({message:n&&""!=n&&null!=n?n:"",spinner:"bubbles"}).then(o=>{o.present().then(()=>{l.isLoading||o.dismiss().then(()=>console.log("abort presenting"))})})})()}hide(){var n=this;return(0,g.Z)(function*(){return n.isLoading=!1,yield n.loadingCtrl.dismiss().then(()=>console.log("dismissed"))})()}}return h.\u0275fac=function(n){return new(n||h)(_.LFG(s.Br),_.LFG(s.yF),_.LFG(s.HT),_.LFG(s.IN),_.LFG(S.H7),_.LFG(s.SH))},h.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},4338:(v,p,r)=>{r.d(p,{G:()=>h});var g=r(5861),_=r(5619),s=r(6689),S=r(6751),A=r(5819);let h=(()=>{class t{constructor(l,o){this.api=l,this.storage=o,this._allContentDummy=new _.X(null),this._allInstalasi=new _.X(null),this._allDataAlatKesehatan=new _.X(null),this.model=[],this.new_model=[]}get allContentDummy(){return this._allContentDummy.asObservable()}get allAllInstalasi(){return this._allInstalasi.asObservable()}get allDataAlatKesehatan(){return this._allDataAlatKesehatan.asObservable()}getSeluruhAlat(){return this.storage.getStorage("seluruhAlat")}getSeluruhAlatData(l){var o=this;return(0,g.Z)(function*(){try{o.api.getAllAlatKesehatan(l).then(function(){var m=(0,g.Z)(function*(d){const T=JSON.parse(d);yield o._allDataAlatKesehatan.next(T.data)});return function(d){return m.apply(this,arguments)}}())}catch(c){throw console.log(c),c}})()}deleteAlat(l,o){var c=this;return(0,g.Z)(function*(){try{let m=c.api.deleteAlatByID(l,o).then(function(){var d=(0,g.Z)(function*(T){JSON.parse(T)});return function(T){return d.apply(this,arguments)}}());console.log("deleteAlat",m)}catch(m){throw console.log(m),m}})()}getContentDummy(){try{this._allContentDummy.next(this.api.getViewListContent)}catch(l){throw console.log("getContentDummy",l),l}}getInstalasi(){try{this._allInstalasi.next(this.api.getInstalasi)}catch(l){throw console.log("instalasi",l),l}}}return t.\u0275fac=function(l){return new(l||t)(s.LFG(S.k),s.LFG(A.V))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);