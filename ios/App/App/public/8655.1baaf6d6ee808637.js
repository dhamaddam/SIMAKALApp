"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8655,3454,3929],{8655:(D,d,s)=>{s.r(d),s.d(d,{SeluruhAlatPageModule:()=>W});var _=s(6814),h=s(95),i=s(7852),S=s(4670),A=s(5861),g=s(7394),t=s(6689),n=s(3454),l=s(4338),r=s(5175);function c(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(16);t.Q6J("ngTemplateOutlet",a)}}function f(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(16);t.Q6J("ngTemplateOutlet",a)}}function p(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(16);t.Q6J("ngTemplateOutlet",a)}}function T(e,o){if(1&e&&(t.TgZ(0,"ion-select-option",16),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.s9C("value",null==a?null:a.name),t.xp6(1),t.Oqu(null==a?null:a.name)}}function v(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",13),t._uU(3,"Pilih Instalasi"),t.qZA(),t.TgZ(4,"ion-list")(5,"ion-item")(6,"ion-select",14),t.NdJ("ionChange",function(m){t.CHM(a);const w=t.oxw();return t.KtG(w.handleInstalasi(m))}),t.YNc(7,T,2,2,"ion-select-option",15),t.qZA()()()()()}if(2&e){const a=t.oxw();t.xp6(7),t.Q6J("ngForOf",a.allInstalasi)}}function P(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(8);t.Q6J("ngTemplateOutlet",a)}}function x(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(10);t.Q6J("ngTemplateOutlet",a)}}function b(e,o){if(1&e&&(t.TgZ(0,"ion-label",25),t._uU(1),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==a?null:a.name,"")}}function C(e,o){if(1&e&&(t.TgZ(0,"ion-label",26),t._uU(1),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==a?null:a.name,"")}}function Z(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(28);t.Q6J("ngTemplateOutlet",a)}}function O(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(24);t.Q6J("ngTemplateOutlet",a)}}function y(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(26);t.Q6J("ngTemplateOutlet",a)}}function I(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(22);t.Q6J("ngTemplateOutlet",a)}}function M(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(30);t.Q6J("ngTemplateOutlet",a)}}function L(e,o){if(1&e&&t.GkF(0,12),2&e){t.oxw();const a=t.MAs(20);t.Q6J("ngTemplateOutlet",a)}}function F(e,o){1&e&&(t.TgZ(0,"ion-button",27),t._uU(1,"Tdk Layak"),t.qZA())}function J(e,o){1&e&&(t.TgZ(0,"ion-button",27),t._uU(1,"Dalam Perbaikan"),t.qZA())}function U(e,o){1&e&&(t.TgZ(0,"ion-button",28),t._uU(1,"Menunggu Spare."),t.qZA())}function G(e,o){1&e&&(t.TgZ(0,"ion-button",29),t._uU(1,"Pakai"),t.qZA())}function Q(e,o){1&e&&(t.TgZ(0,"ion-button",30),t._uU(1,"Default"),t.qZA())}function N(e,o){1&e&&(t.TgZ(0,"ion-button",26),t._uU(1,"Selesai Perb."),t.qZA())}function E(e,o){if(1&e&&(t.TgZ(0,"ion-row")(1,"ion-col",10),t._uU(2),t.qZA(),t.TgZ(3,"ion-col"),t.ynx(4,7),t.YNc(5,P,1,1,"ng-container",8),t.YNc(6,x,1,1,"ng-container",17),t.YNc(7,b,2,1,"ng-template",null,9,t.W1O),t.YNc(9,C,2,1,"ng-template",null,18,t.W1O),t.BQk(),t.qZA(),t.TgZ(11,"ion-col"),t.ynx(12,7),t.YNc(13,Z,1,1,"ng-container",8),t.YNc(14,O,1,1,"ng-container",8),t.YNc(15,y,1,1,"ng-container",8),t.YNc(16,I,1,1,"ng-container",8),t.YNc(17,M,1,1,"ng-container",8),t.YNc(18,L,1,1,"ng-container",8),t.BQk(),t.YNc(19,F,2,0,"ng-template",null,19,t.W1O),t.YNc(21,J,2,0,"ng-template",null,20,t.W1O),t.YNc(23,U,2,0,"ng-template",null,21,t.W1O),t.YNc(25,G,2,0,"ng-template",null,22,t.W1O),t.YNc(27,Q,2,0,"ng-template",null,23,t.W1O),t.YNc(29,N,2,0,"ng-template",null,24,t.W1O),t.qZA()()),2&e){const a=o.$implicit,u=o.index;t.xp6(2),t.Oqu(u+1),t.xp6(2),t.Q6J("ngSwitch",null==a?null:a.owner_id),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(7),t.Q6J("ngSwitch",null==a?null:a.monitoring_status),t.xp6(1),t.Q6J("ngSwitchCase",null),t.xp6(1),t.Q6J("ngSwitchCase","menunggu_sparepart"),t.xp6(1),t.Q6J("ngSwitchCase","layak_pakai"),t.xp6(1),t.Q6J("ngSwitchCase","sedang_dalam_perbaikan"),t.xp6(1),t.Q6J("ngSwitchCase","selesai_perbaikan"),t.xp6(1),t.Q6J("ngSwitchCase","gagal_perbaikan")}}const Y=[{path:"",component:(()=>{class e{constructor(a,u,m){this.global=a,this.seluruhAlatServices=u,this.authServices=m,this.formTitle="Seluruh Alat",this.allContentDummy=[],this.allContentDummySub=new g.w0,this.isLoading=!1,this.allAlatData=[],this._allAlatData=[],this.allAlatDataSub=new g.w0,this.allInstalasi=[],this.allInstalasiSubs=new g.w0}ngOnInit(){this.getAuth(),this.allInstalasiSubs=this.seluruhAlatServices.allAllInstalasi.subscribe(a=>{this.allInstalasi=a instanceof Array?a:this.allInstalasi.concat(a)}),this.allAlatDataSub=this.seluruhAlatServices.allDataAlatKesehatan.subscribe(a=>{a instanceof Array?(this.allAlatData=a,this._allAlatData=a):this.allAlatData=this.allAlatData.concat(a)}),this.getAllData(),console.log("roles",this.roles)}handleInstalasi(a){let u=this._allAlatData;u=u.filter(m=>m.room==a.detail.value),this.allAlatData=u}handleRefresh(a){setTimeout(()=>{this.allAlatDataSub=this.seluruhAlatServices.allDataAlatKesehatan.subscribe(u=>{this.allAlatData=u instanceof Array?u:this.allAlatData.concat(u)}),this.getAllData(),a.target.complete()},2e3)}getAuth(){var a=this;return(0,A.Z)(function*(){const u=yield a.authServices.getId();if(u){let m=JSON.parse(u);a.roles=m.role,a.token=m.access_token}})()}getAllData(){var a=this;return(0,A.Z)(function*(){a.isLoading=!0,a.global.showLoader(),setTimeout((0,A.Z)(function*(){yield a.seluruhAlatServices.getSeluruhAlatData(a.token),yield a.seluruhAlatServices.getInstalasi(),a.isLoading=!1,a.global.hideLoader()}),1e3)})()}ngOnDestroy(){this.allContentDummySub&&this.allContentDummySub.unsubscribe(),this.allAlatDataSub&&this.allAlatDataSub.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(n.U),t.Y36(l.G),t.Y36(r.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-seluruh-alat"]],decls:27,vars:8,consts:[[3,"translucent"],["mode","md","color","success"],["slot","start"],["autoHide","true"],["slot","end"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["nameDefault",""],["size","2"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],[1,"ctm-font-2"],["placeholder","Silahkan Masukkan Instalasi",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["kso",""],["Danger",""],["sedangDalamPerbaikan",""],["masaWarning",""],["siapPakai",""],["default",""],["selesaiPerbaikan",""],["size","small","color","dark"],["size","small","color","primary"],["size","small","color","danger"],["size","small","color","warning"],["size","small","color","success"],["size","small"]],template:function(a,u){1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",2),t._UZ(5,"ion-menu-button",3),t.qZA(),t._UZ(6,"ion-buttons",4),t.qZA()(),t.TgZ(7,"ion-content",5)(8,"ion-refresher",6),t.NdJ("ionRefresh",function(w){return u.handleRefresh(w)}),t._UZ(9,"ion-refresher-content"),t.qZA(),t.TgZ(10,"ion-grid"),t.ynx(11,7),t.YNc(12,c,1,1,"ng-container",8),t.YNc(13,f,1,1,"ng-container",8),t.YNc(14,p,1,1,"ng-container",8),t.YNc(15,v,8,1,"ng-template",null,9,t.W1O),t.BQk(),t.qZA(),t.TgZ(17,"ion-grid")(18,"ion-row")(19,"ion-col",10),t._uU(20,"No"),t.qZA(),t.TgZ(21,"ion-col"),t._uU(22,"Alat"),t.qZA(),t.TgZ(23,"ion-col"),t._uU(24,"Status"),t.qZA()()(),t.TgZ(25,"ion-grid"),t.YNc(26,E,31,10,"ion-row",11),t.qZA()()),2&a&&(t.Q6J("translucent",!0),t.xp6(3),t.hij(" ",u.formTitle," "),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(4),t.Q6J("ngSwitch",u.roles),t.xp6(1),t.Q6J("ngSwitchCase","ADMIN"),t.xp6(1),t.Q6J("ngSwitchCase","KATIM"),t.xp6(1),t.Q6J("ngSwitchCase","BPFK"),t.xp6(12),t.Q6J("ngForOf",u.allAlatData))},dependencies:[_.sg,_.tP,_.RF,_.n9,_.ED,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.Ie,i.Q$,i.q_,i.fG,i.nJ,i.Wo,i.Nd,i.t9,i.n0,i.wd,i.sr,i.QI]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[S.Bz.forChild(Y),S.Bz]}),e})(),W=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez,h.u5,i.Pc,k]}),e})()},3454:(D,d,s)=>{s.d(d,{U:()=>A});var _=s(5861),h=s(6689),i=s(7852),S=s(6593);let A=(()=>{class g{constructor(n,l,r,c,f,p){this.alertCtrl=n,this.toastCtrl=l,this.loadingCtrl=r,this.modalCtrl=c,this.sanitizer=f,this.navCtrl=p,this.isLoading=!1}setLoader(){this.isLoading=!this.isLoading}showAlert(n,l,r){this.alertCtrl.create({header:l||"Authentication failed",message:n,buttons:r||["Okay"]}).then(c=>c.present())}showToast(n,l,r,c=3e3){var f=this;return(0,_.Z)(function*(){(yield f.toastCtrl.create({message:n,duration:c,color:l,position:r})).present()})()}errorToast(n,l=4e3){this.showToast(n||"No Internet Connection","danger","bottom",l)}successToast(n){this.showToast(n,"success","bottom")}showLoader(n,l){return this.isLoading||this.setLoader(),this.loadingCtrl.create({message:n,spinner:l||"bubbles"}).then(r=>{r.present().then(()=>{this.isLoading||r.dismiss().then(()=>{console.log("abort presenting")})})}).catch(r=>{console.log("show loading error: ",r)})}hideLoader(){return this.isLoading&&this.setLoader(),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(n=>console.log("error hide loader: ",n))}createModal(n){var l=this;return(0,_.Z)(function*(){const r=yield l.modalCtrl.create(n);yield r.present();const{data:c}=yield r.onWillDismiss();if(console.log(c),c)return c})()}modalDismiss(n){let l=n||null;console.log("data",l),this.modalCtrl.dismiss(l)}getIcon(n){switch(n.toLowerCase()){case"home":return"home-outline";case"work":return"briefcase-outline";default:return"location-outline"}}getSantizeUrl(n){return this.sanitizer.bypassSecurityTrustUrl(n)}apiErrorHandler(n){return n&&401==n.status&&n.error.error?(this.errorToast(n.error.error),this.navCtrl.navigateRoot("/login"),!1):n&&500==n.status&&n.error.error?(this.errorToast(n.error.error),!1):-1==n.status?(this.errorToast("Failed To Connect With Server"),!1):401==n.status?(this.errorToast("Unauthorized Request!"),localStorage.removeItem("token"),localStorage.removeItem("uid"),this.navCtrl.navigateRoot("/login"),!1):500==n.status?(this.errorToast("Something went wrong"),!1):422==n.status&&n.error.error?(this.errorToast(n.error.error),!1):(this.errorToast("Something went wrong"),!1)}show(n){var l=this;return(0,_.Z)(function*(){return l.isLoading=!0,yield l.loadingCtrl.create({message:n&&""!=n&&null!=n?n:"",spinner:"bubbles"}).then(r=>{r.present().then(()=>{l.isLoading||r.dismiss().then(()=>console.log("abort presenting"))})})})()}hide(){var n=this;return(0,_.Z)(function*(){return n.isLoading=!1,yield n.loadingCtrl.dismiss().then(()=>console.log("dismissed"))})()}}return g.\u0275fac=function(n){return new(n||g)(h.LFG(i.Br),h.LFG(i.yF),h.LFG(i.HT),h.LFG(i.IN),h.LFG(S.H7),h.LFG(i.SH))},g.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},4338:(D,d,s)=>{s.d(d,{G:()=>g});var _=s(5861),h=s(5619),i=s(6689),S=s(6751),A=s(5819);let g=(()=>{class t{constructor(l,r){this.api=l,this.storage=r,this._allContentDummy=new h.X(null),this._allInstalasi=new h.X(null),this._allDataAlatKesehatan=new h.X(null),this.model=[],this.new_model=[]}get allContentDummy(){return this._allContentDummy.asObservable()}get allAllInstalasi(){return this._allInstalasi.asObservable()}get allDataAlatKesehatan(){return this._allDataAlatKesehatan.asObservable()}getSeluruhAlat(){return this.storage.getStorage("seluruhAlat")}getSeluruhAlatData(l){var r=this;return(0,_.Z)(function*(){try{r.api.getAllAlatKesehatan(l).then(function(){var f=(0,_.Z)(function*(p){const T=JSON.parse(p);yield r._allDataAlatKesehatan.next(T.data)});return function(p){return f.apply(this,arguments)}}())}catch(c){throw console.log(c),c}})()}getContentDummy(){try{this._allContentDummy.next(this.api.getViewListContent)}catch(l){throw console.log("getContentDummy",l),l}}getInstalasi(){try{this._allInstalasi.next(this.api.getInstalasi)}catch(l){throw console.log("instalasi",l),l}}}return t.\u0275fac=function(l){return new(l||t)(i.LFG(S.k),i.LFG(A.V))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);