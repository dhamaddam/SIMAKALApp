"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1065,5557,2618],{1065:(Z,b,n)=>{n.r(b),n.d(b,{UpdateKalibrasiPageModule:()=>P});var p=n(6814),i=n(7852),d=n(4670),_=n(5861),l=n(95),K=n(6676),m=n(7394),a=n(6689),s=n(3454),r=n(2690),u=n(5175),c=n(5557);function g(e,v){1&e&&(a.TgZ(0,"div",14),a._UZ(1,"ion-spinner",15),a.qZA())}const A=[{path:"",component:(()=>{class e{constructor(t,o,h,y,S,T){this.router=t,this.global=o,this.inputAlatKesehatanServices=h,this.authServices=y,this.fb=S,this.navExtras=T,this.formTitle="Update Kalibrasi",this.isLoading=!1,this.allDataAlatKesehatanById=[],this.allDataAlatKesehatanByIdSub=new m.w0,this.today=K().format("YYYY-MM-DD"),this.resultData=[],this.calibration_status="",this.id_alat=""}ngOnInit(){this.getAuth(),this.allDataAlatKesehatanById=this.navExtras.getExtras(),this.resultData.push(this.navExtras.getExtras()),this.resultData.forEach(t=>{console.log("element",t.details[0].calibration_status),this.myForm=this.fb.group({tanggal:[this.today,[l.kI.required]],monitoring_status:[""],name:[t.name],pic:[t.pic],inventory_no:[t.inventory_no],room:[t.room],type:[t.type],calibration_status:[""],owner_id:[t.owner_id],initial_calibration:[t.details[0].initial_calibration],re_calibration:[t.details[0].re_calibration],initial_monitoring:[t.details[0].initial_monitoring],re_monitoring:[t.details[0].re_monitoring]}),this.id_alat=t.id,null==t.calibration_status?(this.myForm.form="gagal_kalibrasi",this.calibration_status="status_belum_diisi"):(this.myForm.form=t.calibration_status,this.calibration_status=t.calibration_status)})}getAuth(){var t=this;return(0,_.Z)(function*(){const o=yield t.authServices.getId();if(o){let h=JSON.parse(o);console.log("this.token",h.access_token),t.token=h.access_token}})()}sendNotificationBPFK(){var t=this;let o=this.myForm.value;try{setTimeout((0,_.Z)(function*(){console.log("getAuth(){",t.token),yield t.inputAlatKesehatanServices.sendAndCreateNotificationBPFK(o,t.token)}),1e3)}catch(h){throw h}}placeData(t){var o=this;try{setTimeout((0,_.Z)(function*(){yield o.inputAlatKesehatanServices.updateAlatKesehatanCalibration(o.id_alat,t,o.token),o.isLoading=!1,o.global.hideLoader(),o.router.navigate(["/menu/jadwal-kalibrasi"],{})}),1e3)}catch(h){throw h}}saveData(){this.isLoading=!0,this.global.showLoader(),console.log(this.myForm.value),this.placeData(this.myForm.value),this.isLoading=!1,this.global.hideLoader()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(d.F0),a.Y36(s.U),a.Y36(r.f),a.Y36(u.e),a.Y36(l.qu),a.Y36(c.l))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-update-kalibrasi"]],decls:46,vars:6,consts:[[1,"ion-no-border"],["slot","start"],[3,"fullscreen"],[1,"ion-margin",3,"formGroup","ngSubmit"],["class","ion-text-center alignSpinner",4,"ngIf"],[1,"ctm-font-2"],["formControlName","name","type","text",3,"readonly"],["interface","action-sheet","formControlName","calibration_status","placeholder","Status Kalibrasi",3,"ngModel","ngModelChange"],["value","berhasil_kalibrasi"],["value","gagal_kalibrasi"],["type","file"],["type","submit","expand","full","color","success","shape","round","expand","block"],["expand","full","color","medium","shape","round"],["expand","full","color","danger","shape","round","expand","block",3,"click"],[1,"ion-text-center","alignSpinner"],["color","primary"]],template:function(t,o){1&t&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),a._uU(3),a.qZA(),a.TgZ(4,"ion-buttons",1),a._UZ(5,"ion-back-button"),a.qZA()()(),a.TgZ(6,"ion-content",2)(7,"form",3),a.NdJ("ngSubmit",function(){return o.saveData()}),a.YNc(8,g,2,0,"div",4),a.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col")(12,"ion-label",5),a._uU(13,"Nama Alat"),a.qZA(),a.TgZ(14,"ion-item"),a._UZ(15,"ion-input",6),a.qZA()()()(),a.TgZ(16,"ion-grid")(17,"ion-row")(18,"ion-col")(19,"ion-label",5),a._uU(20,"Kondisi Alat"),a.qZA(),a.TgZ(21,"ion-list")(22,"ion-item")(23,"ion-select",7),a.NdJ("ngModelChange",function(y){return o.myForm.form=y}),a.TgZ(24,"ion-select-option",8),a._uU(25,"Berhasil Kalibrasi"),a.qZA(),a.TgZ(26,"ion-select-option",9),a._uU(27,"Gagal Kalibrasi"),a.qZA()()()()()()(),a.TgZ(28,"ion-grid")(29,"ion-row")(30,"ion-col")(31,"ion-label",5),a._uU(32,"Nama Alat"),a.qZA(),a.TgZ(33,"ion-item"),a._UZ(34,"ion-input",10),a.qZA()()()(),a.TgZ(35,"ion-grid")(36,"ion-row")(37,"ion-col")(38,"ion-button",11),a._uU(39,"Simpan"),a.qZA()(),a.TgZ(40,"ion-col")(41,"ion-button",12),a._uU(42,"Kembali"),a.qZA()()()(),a.TgZ(43,"ion-row")(44,"ion-button",13),a.NdJ("click",function(){return o.sendNotificationBPFK()}),a._uU(45,"Kirim Notifikasi BPFK"),a.qZA()()()()),2&t&&(a.xp6(3),a.hij(" ",o.formTitle," "),a.xp6(3),a.Q6J("fullscreen",!0),a.xp6(1),a.Q6J("formGroup",o.myForm),a.xp6(1),a.Q6J("ngIf",o.isLoading),a.xp6(7),a.Q6J("readonly",!0),a.xp6(8),a.Q6J("ngModel",o.myForm.form))},dependencies:[p.O5,l._Y,l.JJ,l.JL,l.sg,l.u,i.oU,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.pK,i.Ie,i.Q$,i.q_,i.Nd,i.t9,i.n0,i.PQ,i.wd,i.sr,i.QI,i.j9,i.cs]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[d.Bz.forChild(A),d.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[p.ez,l.u5,l.UX,i.Pc,U]}),e})()},2690:(Z,b,n)=>{n.d(b,{f:()=>K});var p=n(5861),i=n(5619),d=n(6689),_=n(7852),l=n(6751);let K=(()=>{class m{constructor(s,r){this.loadingController=s,this.api=r,this._modeldataNotification=new i.X(null)}saveInputAlatKesehatan(s,r){this.api.saveInputAlatKesehatan(s,r).then(function(){var u=(0,p.Z)(function*(c){"success"==JSON.parse(c).meta.status?console.log("data sukses disimpan"):console.log("data gagal disimpan")});return function(c){return u.apply(this,arguments)}}())}updateAlatKesehatan(s,r,u){var c=this;this.api.updateAlatKesehatan(s,r,u).then(function(){var g=(0,p.Z)(function*(f){const A=JSON.parse(f);"success"==A.meta.status?(console.log("data sukses disimpan"),c.sendAndCreateNotificationMonitoring(s,A,u)):console.log("data gagal disimpan")});return function(f){return g.apply(this,arguments)}}())}updateAlatKesehatanCalibration(s,r,u){var c=this;this.api.updateAlatKesehatanCalibration(s,r,u).then(function(){var g=(0,p.Z)(function*(f){"success"==JSON.parse(f).meta.status?(console.log("data sukses disimpan"),c.sendAndCreateNotificationCalibration(s,r,u)):console.log("data gagal disimpan")});return function(f){return g.apply(this,arguments)}}())}sendAndCreateNotificationMonitoring(s,r,u){this.api.sendAndCreateNotificationMonitoring(s,r,u).then(function(){var c=(0,p.Z)(function*(g){JSON.parse(g),console.log("data sukses disimpan")});return function(g){return c.apply(this,arguments)}}())}sendAndCreateNotificationCalibration(s,r,u){this.api.sendAndCreateNotificationCalibration(s,r,u).then(function(){var c=(0,p.Z)(function*(g){"success"==JSON.parse(g).meta.status?console.log("data sukses disimpan"):console.log("data gagal disimpan")});return function(g){return c.apply(this,arguments)}}())}sendAndCreateNotificationBPFK(s,r){this.api.sendAndCreateNotificationBPFK(s,r).then(function(){var u=(0,p.Z)(function*(c){"success"==JSON.parse(c).meta.status?console.log("data sukses disimpan"):console.log("data gagal disimpan")});return function(c){return u.apply(this,arguments)}}())}}return m.\u0275fac=function(s){return new(s||m)(d.LFG(_.HT),d.LFG(l.k))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5557:(Z,b,n)=>{n.d(b,{l:()=>i});var p=n(6689);let i=(()=>{class d{constructor(){}setExtras(l){this.extras=l}getExtras(){return this.extras}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);