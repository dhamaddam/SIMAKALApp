"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7294],{7294:(w,M,r)=>{r.r(M),r.d(M,{MonitoringAlatPageModule:()=>V});var _=r(6814),u=r(95),o=r(7852),x=r(4670),A=r(5861),h=r(7394),t=r(6689),a=r(3454),i=r(7750),s=r(5175),g=r(4338),m=r(5557);function f(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(16);t.Q6J("ngTemplateOutlet",n)}}function T(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(16);t.Q6J("ngTemplateOutlet",n)}}function D(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(16);t.Q6J("ngTemplateOutlet",n)}}function S(e,l){if(1&e&&(t.TgZ(0,"ion-select-option",17),t._uU(1),t.qZA()),2&e){const n=l.$implicit;t.s9C("value",null==n?null:n.name),t.xp6(1),t.Oqu(null==n?null:n.name)}}function C(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",14),t._uU(3,"Pilih Instalasi"),t.qZA(),t.TgZ(4,"ion-list")(5,"ion-item")(6,"ion-select",15),t.NdJ("ionChange",function(d){t.CHM(n);const p=t.oxw();return t.KtG(p.handleInstalasi(d))}),t.YNc(7,S,2,2,"ion-select-option",16),t.qZA()()()()()}if(2&e){const n=t.oxw();t.xp6(7),t.Q6J("ngForOf",n.allInstalasi)}}function y(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(9);t.Q6J("ngTemplateOutlet",n)}}function O(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(11);t.Q6J("ngTemplateOutlet",n)}}function P(e,l){if(1&e&&(t.TgZ(0,"ion-label",24),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==n?null:n.name,"")}}function J(e,l){if(1&e&&(t.TgZ(0,"ion-label",25),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==n?null:n.name,"")}}function b(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function I(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function Z(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function E(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function F(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function L(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function Q(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function G(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function N(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(35);t.Q6J("ngTemplateOutlet",n)}}function K(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(29);t.Q6J("ngTemplateOutlet",n)}}function Y(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(29);t.Q6J("ngTemplateOutlet",n)}}function k(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(33);t.Q6J("ngTemplateOutlet",n)}}function U(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(33);t.Q6J("ngTemplateOutlet",n)}}function B(e,l){if(1&e&&t.GkF(0,13),2&e){t.oxw();const n=t.MAs(31);t.Q6J("ngTemplateOutlet",n)}}function R(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-button",26),t.NdJ("click",function(d){t.CHM(n);const p=t.oxw().$implicit,v=t.oxw();return t.KtG(v.handleClick(d,p))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu((null==n?null:n.details[0].monitoring_date_diff)+" Hari Lagi")}}function W(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-button",27),t.NdJ("click",function(d){t.CHM(n);const p=t.oxw().$implicit,v=t.oxw();return t.KtG(v.handleClick(d,p))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu((null==n?null:n.details[0].monitoring_date_diff)+" Hari Lagi")}}function z(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(d){t.CHM(n);const p=t.oxw().$implicit,v=t.oxw();return t.KtG(v.handleClick(d,p))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu((null==n?null:n.details[0].monitoring_date_diff)+" Hari Lagi")}}function H(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-button",29),t.NdJ("click",function(d){t.CHM(n);const p=t.oxw().$implicit,v=t.oxw();return t.KtG(v.handleClick(d,p))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu((null==n?null:n.details[0].monitoring_date_diff)+" Hari Lagi")}}function $(e,l){if(1&e&&(t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",11),t._uU(3),t.qZA(),t.TgZ(4,"ion-col"),t.ynx(5,8),t.YNc(6,y,1,1,"ng-container",9),t.YNc(7,O,1,1,"ng-container",18),t.YNc(8,P,2,1,"ng-template",null,10,t.W1O),t.YNc(10,J,2,1,"ng-template",null,19,t.W1O),t.BQk(),t.qZA(),t.TgZ(12,"ion-col"),t.ynx(13,8),t.YNc(14,b,1,1,"ng-container",9),t.YNc(15,I,1,1,"ng-container",9),t.YNc(16,Z,1,1,"ng-container",9),t.YNc(17,E,1,1,"ng-container",9),t.YNc(18,F,1,1,"ng-container",9),t.YNc(19,L,1,1,"ng-container",9),t.YNc(20,Q,1,1,"ng-container",9),t.YNc(21,G,1,1,"ng-container",9),t.YNc(22,N,1,1,"ng-container",9),t.YNc(23,K,1,1,"ng-container",9),t.YNc(24,Y,1,1,"ng-container",9),t.YNc(25,k,1,1,"ng-container",9),t.YNc(26,U,1,1,"ng-container",9),t.YNc(27,B,1,1,"ng-container",18),t.BQk(),t.YNc(28,R,2,1,"ng-template",null,20,t.W1O),t.YNc(30,W,2,1,"ng-template",null,21,t.W1O),t.YNc(32,z,2,1,"ng-template",null,22,t.W1O),t.YNc(34,H,2,1,"ng-template",null,23,t.W1O),t.qZA()()()),2&e){const n=l.$implicit,c=l.index;t.xp6(3),t.Oqu(c+1),t.xp6(2),t.Q6J("ngSwitch",null==n?null:n.owner_id),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(7),t.Q6J("ngSwitch",null==n?null:n.details[0].monitoring_date_diff),t.xp6(1),t.Q6J("ngSwitchCase",12),t.xp6(1),t.Q6J("ngSwitchCase",11),t.xp6(1),t.Q6J("ngSwitchCase",10),t.xp6(1),t.Q6J("ngSwitchCase",9),t.xp6(1),t.Q6J("ngSwitchCase",8),t.xp6(1),t.Q6J("ngSwitchCase",7),t.xp6(1),t.Q6J("ngSwitchCase",6),t.xp6(1),t.Q6J("ngSwitchCase",5),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",0)}}const j=[{path:"",component:(()=>{class e{constructor(n,c,d,p,v,q,tt){this.global=n,this.monitoringAlatServices=c,this.activatedRoute=d,this.authServices=p,this.router=v,this.seluruhAlatServices=q,this.navExtras=tt,this.formTitle="Monitoring Alat",this.allContentDummy=[],this.allContentDummySub=new h.w0,this.isLoading=!1,this.allAlatData=[],this.allAlatDataSub=new h.w0,this.allInstalasi=[],this._allAlatData=[],this.allInstalasiSubs=new h.w0}handleInstalasi(n){console.log("event id",n.detail.value);let c=this._allAlatData;c=c.filter(d=>d.room==n.detail.value),this.allAlatData=c}ngOnInit(){this.getAuth(),this.allInstalasiSubs=this.seluruhAlatServices.allAllInstalasi.subscribe(n=>{this.allInstalasi=n instanceof Array?n:this.allInstalasi.concat(n)}),this.allContentDummySub=this.monitoringAlatServices.allContentDummy.subscribe(n=>{this.allContentDummy=n instanceof Array?n:this.allContentDummy.concat(n)}),this.allAlatDataSub=this.monitoringAlatServices.allDataAlatKesehatan.subscribe(n=>{n instanceof Array?(this.allAlatData=n,this._allAlatData=n):this.allAlatData=this.allAlatData.concat(n)}),console.log("row?.details[0].month_diff",this.allAlatData),this.getAllData()}getAuth(){var n=this;return(0,A.Z)(function*(){const c=yield n.authServices.getId();if(c){let d=JSON.parse(c);n.roles=d.role,n.token=d.access_token}})()}handleRefresh(n){setTimeout(()=>{this.allAlatDataSub=this.monitoringAlatServices.allDataAlatKesehatan.subscribe(c=>{this.allAlatData=c instanceof Array?c:this.allAlatData.concat(c)}),this.getAllData(),n.target.complete()},2e3)}getAllData(){var n=this;return(0,A.Z)(function*(){setTimeout((0,A.Z)(function*(){yield n.seluruhAlatServices.getInstalasi(),yield n.monitoringAlatServices.getContentDummy(),yield n.monitoringAlatServices.getSeluruhAlatData(n.token),n.isLoading=!1,n.global.hideLoader()}),1e3)})()}handleClick(n,c){this.navExtras.setExtras(c),this.router.navigateByUrl("details-monitoring")}ngOnDestroy(){this.allContentDummySub&&this.allContentDummySub.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.U),t.Y36(i.c),t.Y36(x.gz),t.Y36(s.e),t.Y36(x.F0),t.Y36(g.G),t.Y36(m.l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-monitoring-alat"]],decls:26,vars:9,consts:[[3,"translucent"],["mode","md","color","success"],["slot","start"],["autoHide","false"],["slot","end"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[3,"fixed"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["nameDefault",""],["size","2"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],[1,"ctm-font-2"],["placeholder","Silahkan Masukkan Instalasi",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["kso",""],["masaWarningJadwal",""],["defaultJadwal",""],["sedangDalamPerbaikanJadwal",""],["siapPakaiJadwal",""],["size","small","color","dark"],["size","small","color","primary"],["size","small","color","warning",3,"click"],["size","small",3,"click"],["size","small","color","danger",3,"click"],["size","small","color","success",3,"click"]],template:function(n,c){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",2),t._UZ(5,"ion-menu-button",3),t.qZA(),t._UZ(6,"ion-buttons",4),t.qZA()(),t.TgZ(7,"ion-content",5)(8,"ion-refresher",6),t.NdJ("ionRefresh",function(p){return c.handleRefresh(p)}),t._UZ(9,"ion-refresher-content"),t.qZA(),t.TgZ(10,"ion-grid",7),t.ynx(11,8),t.YNc(12,f,1,1,"ng-container",9),t.YNc(13,T,1,1,"ng-container",9),t.YNc(14,D,1,1,"ng-container",9),t.YNc(15,C,8,1,"ng-template",null,10,t.W1O),t.BQk(),t.qZA(),t.TgZ(17,"ion-grid")(18,"ion-row")(19,"ion-col",11),t._uU(20,"No"),t.qZA(),t.TgZ(21,"ion-col"),t._uU(22,"Alat"),t.qZA(),t.TgZ(23,"ion-col"),t._uU(24," Jadwal "),t.qZA()()(),t.YNc(25,$,36,17,"ion-grid",12),t.qZA()),2&n&&(t.Q6J("translucent",!0),t.xp6(3),t.hij(" ",c.formTitle," "),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(3),t.Q6J("fixed",!0),t.xp6(1),t.Q6J("ngSwitch",c.roles),t.xp6(1),t.Q6J("ngSwitchCase","ADMIN"),t.xp6(1),t.Q6J("ngSwitchCase","KATIM"),t.xp6(1),t.Q6J("ngSwitchCase","BPFK"),t.xp6(11),t.Q6J("ngForOf",c.allAlatData))},dependencies:[_.sg,_.tP,_.RF,_.n9,_.ED,o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.Ie,o.Q$,o.q_,o.fG,o.nJ,o.Wo,o.Nd,o.t9,o.n0,o.wd,o.sr,o.QI]}),e})()}];let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[x.Bz.forChild(j),x.Bz]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez,u.u5,o.Pc,X]}),e})()},3454:(w,M,r)=>{r.d(M,{U:()=>A});var _=r(5861),u=r(6689),o=r(7852),x=r(6593);let A=(()=>{class h{constructor(a,i,s,g,m,f){this.alertCtrl=a,this.toastCtrl=i,this.loadingCtrl=s,this.modalCtrl=g,this.sanitizer=m,this.navCtrl=f,this.isLoading=!1}setLoader(){this.isLoading=!this.isLoading}showAlert(a,i,s){this.alertCtrl.create({header:i||"Authentication failed",message:a,buttons:s||["Okay"]}).then(g=>g.present())}showToast(a,i,s,g=3e3){var m=this;return(0,_.Z)(function*(){(yield m.toastCtrl.create({message:a,duration:g,color:i,position:s})).present()})()}errorToast(a,i=4e3){this.showToast(a||"No Internet Connection","danger","bottom",i)}successToast(a){this.showToast(a,"success","bottom")}showLoader(a,i){return this.isLoading||this.setLoader(),this.loadingCtrl.create({message:a,spinner:i||"bubbles"}).then(s=>{s.present().then(()=>{this.isLoading||s.dismiss().then(()=>{console.log("abort presenting")})})}).catch(s=>{console.log("show loading error: ",s)})}hideLoader(){return this.isLoading&&this.setLoader(),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(a=>console.log("error hide loader: ",a))}createModal(a){var i=this;return(0,_.Z)(function*(){const s=yield i.modalCtrl.create(a);yield s.present();const{data:g}=yield s.onWillDismiss();if(console.log(g),g)return g})()}modalDismiss(a){let i=a||null;console.log("data",i),this.modalCtrl.dismiss(i)}getIcon(a){switch(a.toLowerCase()){case"home":return"home-outline";case"work":return"briefcase-outline";default:return"location-outline"}}getSantizeUrl(a){return this.sanitizer.bypassSecurityTrustUrl(a)}apiErrorHandler(a){return a&&401==a.status&&a.error.error?(this.errorToast(a.error.error),this.navCtrl.navigateRoot("/login"),!1):a&&500==a.status&&a.error.error?(this.errorToast(a.error.error),!1):-1==a.status?(this.errorToast("Failed To Connect With Server"),!1):401==a.status?(this.errorToast("Unauthorized Request!"),localStorage.removeItem("token"),localStorage.removeItem("uid"),this.navCtrl.navigateRoot("/login"),!1):500==a.status?(this.errorToast("Something went wrong"),!1):422==a.status&&a.error.error?(this.errorToast(a.error.error),!1):(this.errorToast("Something went wrong"),!1)}show(a){var i=this;return(0,_.Z)(function*(){return i.isLoading=!0,yield i.loadingCtrl.create({message:a&&""!=a&&null!=a?a:"",spinner:"bubbles"}).then(s=>{s.present().then(()=>{i.isLoading||s.dismiss().then(()=>console.log("abort presenting"))})})})()}hide(){var a=this;return(0,_.Z)(function*(){return a.isLoading=!1,yield a.loadingCtrl.dismiss().then(()=>console.log("dismissed"))})()}}return h.\u0275fac=function(a){return new(a||h)(u.LFG(o.Br),u.LFG(o.yF),u.LFG(o.HT),u.LFG(o.IN),u.LFG(x.H7),u.LFG(o.SH))},h.\u0275prov=u.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},7750:(w,M,r)=>{r.d(M,{c:()=>A});var _=r(5861),u=r(5619),o=r(6689),x=r(6751);let A=(()=>{class h{constructor(a){this.api=a,this._allContentDummy=new u.X(null),this._allDataAlatKesehatan=new u.X(null),this._allDataAlatKesehatanById=new u.X(null)}get allContentDummy(){return this._allContentDummy.asObservable()}get allDataAlatKesehatan(){return this._allDataAlatKesehatan.asObservable()}get allDataAlatKesehatanById(){return this._allDataAlatKesehatanById.asObservable()}getContentDummy(){try{this._allContentDummy.next(this.api.getViewListContent)}catch(a){throw console.log("getContentDummy",a),a}}getSeluruhAlatData(a){var i=this;return(0,_.Z)(function*(){console.log("token getSeluruhAlatData",a);try{i.api.getAllAlatKesehatan(a).then(function(){var g=(0,_.Z)(function*(m){const f=JSON.parse(m);yield i._allDataAlatKesehatan.next(f.data)});return function(m){return g.apply(this,arguments)}}())}catch(s){throw console.log(s),s}})()}getSeluruhAlatDataById(a,i){var s=this;return(0,_.Z)(function*(){try{s.api.getAllAlatKesehatanById(a,i).then(function(){var m=(0,_.Z)(function*(f){const T=JSON.parse(f);console.log("token getSeluruhAlatData",T.data),yield s._allDataAlatKesehatanById.next(T.data)});return function(f){return m.apply(this,arguments)}}())}catch(g){throw console.log(g),g}})()}}return h.\u0275fac=function(a){return new(a||h)(o.LFG(x.k))},h.\u0275prov=o.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},5557:(w,M,r)=>{r.d(M,{l:()=>u});var _=r(6689);let u=(()=>{class o{constructor(){}setExtras(A){this.extras=A}getExtras(){return this.extras}}return o.\u0275fac=function(A){return new(A||o)},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4338:(w,M,r)=>{r.d(M,{G:()=>h});var _=r(5861),u=r(5619),o=r(6689),x=r(6751),A=r(5819);let h=(()=>{class t{constructor(i,s){this.api=i,this.storage=s,this._allContentDummy=new u.X(null),this._allInstalasi=new u.X(null),this._allDataAlatKesehatan=new u.X(null),this.model=[],this.new_model=[]}get allContentDummy(){return this._allContentDummy.asObservable()}get allAllInstalasi(){return this._allInstalasi.asObservable()}get allDataAlatKesehatan(){return this._allDataAlatKesehatan.asObservable()}getSeluruhAlat(){return this.storage.getStorage("seluruhAlat")}getSeluruhAlatData(i){var s=this;return(0,_.Z)(function*(){try{s.api.getAllAlatKesehatan(i).then(function(){var m=(0,_.Z)(function*(f){const T=JSON.parse(f);yield s._allDataAlatKesehatan.next(T.data)});return function(f){return m.apply(this,arguments)}}())}catch(g){throw console.log(g),g}})()}deleteAlat(i,s){var g=this;return(0,_.Z)(function*(){try{let m=g.api.deleteAlatByID(i,s).then(function(){var f=(0,_.Z)(function*(T){JSON.parse(T)});return function(T){return f.apply(this,arguments)}}());console.log("deleteAlat",m)}catch(m){throw console.log(m),m}})()}getContentDummy(){try{this._allContentDummy.next(this.api.getViewListContent)}catch(i){throw console.log("getContentDummy",i),i}}getInstalasi(){try{this._allInstalasi.next(this.api.getInstalasi)}catch(i){throw console.log("instalasi",i),i}}}return t.\u0275fac=function(i){return new(i||t)(o.LFG(x.k),o.LFG(A.V))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);