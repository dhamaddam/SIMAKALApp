"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1161,3454,3929],{1161:(Z,N,r)=>{r.r(N),r.d(N,{NotificationPageModule:()=>M});var u=r(6814),f=r(95),a=r(7852),v=r(4670),m=r(5861),_=r(7394),t=r(6689),o=r(3454),e=r(5619),l=r(5819),g=r(6751);let T=(()=>{class i{constructor(n,c,d,p,h){this.storage=n,this.router=c,this.alertController=d,this.loadingController=p,this.DB=h,this._modeldataNotification=new e.X(null)}get alldataNotification(){return this._modeldataNotification.asObservable()}getNotifications(n){var c=this;return(0,m.Z)(function*(){const d=yield c.loadingController.create();yield d.present(),c.DB.getNotification(n).then(function(){var p=(0,m.Z)(function*(h){console.log("isi auth service",h);const J=JSON.parse(h);console.log(J.status)});return function(h){return p.apply(this,arguments)}}()).catch(function(){var p=(0,m.Z)(function*(h){throw console.log("log Notification",h),h});return function(h){return p.apply(this,arguments)}}()),yield d.dismiss()})()}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(l.V),t.LFG(v.F0),t.LFG(a.Br),t.LFG(a.HT),t.LFG(g.k))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var S=r(5175);function P(i,s){if(1&i&&t.GkF(0,14),2&i){t.oxw();const n=t.MAs(22);t.Q6J("ngTemplateOutlet",n)}}function L(i,s){if(1&i&&t.GkF(0,14),2&i){t.oxw();const n=t.MAs(18);t.Q6J("ngTemplateOutlet",n)}}function A(i,s){if(1&i&&t.GkF(0,14),2&i){t.oxw();const n=t.MAs(20);t.Q6J("ngTemplateOutlet",n)}}function C(i,s){if(1&i&&t.GkF(0,14),2&i){t.oxw();const n=t.MAs(16);t.Q6J("ngTemplateOutlet",n)}}function b(i,s){if(1&i&&t.GkF(0,14),2&i){t.oxw();const n=t.MAs(14);t.Q6J("ngTemplateOutlet",n)}}function y(i,s){1&i&&(t.TgZ(0,"ion-button",15),t._uU(1,"Danger"),t.qZA())}function x(i,s){1&i&&(t.TgZ(0,"ion-button",15),t._uU(1,"Dalam Perbaikan"),t.qZA())}function w(i,s){1&i&&(t.TgZ(0,"ion-button",16),t._uU(1,"Warning"),t.qZA())}function F(i,s){1&i&&(t.TgZ(0,"ion-button",17),t._uU(1,"Pakai"),t.qZA())}function O(i,s){1&i&&(t.TgZ(0,"ion-button",18),t._uU(1,"Default"),t.qZA())}function D(i,s){if(1&i&&(t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",5),t._uU(3),t.qZA(),t.TgZ(4,"ion-col"),t._uU(5),t.qZA(),t.TgZ(6,"ion-col"),t.ynx(7,7),t.YNc(8,P,1,1,"ng-container",8),t.YNc(9,L,1,1,"ng-container",8),t.YNc(10,A,1,1,"ng-container",8),t.YNc(11,C,1,1,"ng-container",8),t.YNc(12,b,1,1,"ng-container",8),t.BQk(),t.YNc(13,y,2,0,"ng-template",null,9,t.W1O),t.YNc(15,x,2,0,"ng-template",null,10,t.W1O),t.YNc(17,w,2,0,"ng-template",null,11,t.W1O),t.YNc(19,F,2,0,"ng-template",null,12,t.W1O),t.YNc(21,O,2,0,"ng-template",null,13,t.W1O),t.qZA()()()),2&i){const n=s.$implicit,c=s.index;t.xp6(3),t.Oqu(c+1),t.xp6(2),t.Oqu(null==n?null:n.name),t.xp6(2),t.Q6J("ngSwitch",null==n?null:n.monitoring_status),t.xp6(1),t.Q6J("ngSwitchCase",null),t.xp6(1),t.Q6J("ngSwitchCase","menunggu_sparepart"),t.xp6(1),t.Q6J("ngSwitchCase","layak_pakai"),t.xp6(1),t.Q6J("ngSwitchCase","layak_pakai"),t.xp6(1),t.Q6J("ngSwitchCase","sedang_dalam_perbaikan")}}const G=[{path:"",component:(()=>{class i{constructor(n,c,d,p){this.global=n,this.notificationServices=c,this.navCtrl=d,this.authServices=p,this.formTitle="Notifikasi Form",this.isLoading=!1,this.allnotificationData=[],this.allnotificationDataSubs=new _.w0}ngOnInit(){this.getAuth(),this.allnotificationDataSubs=this.notificationServices.alldataNotification.subscribe(n=>{this.allnotificationData=n instanceof Array?n:this.allnotificationData.concat(n)}),this.getAllData()}getAuth(){var n=this;return(0,m.Z)(function*(){const c=yield n.authServices.getId();if(c){let d=JSON.parse(c);console.log("this.token",d.access_token),n.token=d.access_token}})()}getAllData(){var n=this;return(0,m.Z)(function*(){n.isLoading=!0,n.global.showLoader(),setTimeout((0,m.Z)(function*(){yield n.notificationServices.getNotifications(n.token),n.isLoading=!1,n.global.hideLoader()}),1e3)})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(o.U),t.Y36(T),t.Y36(a.SH),t.Y36(S.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-notification"]],decls:17,vars:4,consts:[[1,"ion-no-border"],["slot","start"],[3,"fullscreen"],[1,"ion-padding",3,"fullscreen"],[3,"fixed"],["size","2"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["Danger",""],["sedangDalamPerbaikan",""],["masaWarning",""],["siapPakai",""],["default",""],[3,"ngTemplateOutlet"],["size","small","color","danger"],["size","small","color","warning"],["size","small","color","success"],["size","small"]],template:function(n,c){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3," Notification "),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-back-button"),t.qZA()()(),t.TgZ(6,"ion-content",2)(7,"ion-content",3)(8,"ion-grid",4)(9,"ion-row")(10,"ion-col",5),t._uU(11,"No"),t.qZA(),t.TgZ(12,"ion-col"),t._uU(13,"Alat"),t.qZA(),t.TgZ(14,"ion-col"),t._uU(15,"Tanggal Kalibrasi"),t.qZA()()(),t.YNc(16,D,23,8,"ion-grid",6),t.qZA()()),2&n&&(t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("fixed",!0),t.xp6(8),t.Q6J("ngForOf",c.allnotificationData))},dependencies:[u.sg,u.tP,u.RF,u.n9,a.oU,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.Nd,a.wd,a.sr,a.cs]}),i})()}];let U=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.Bz.forChild(G),v.Bz]}),i})(),M=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.ez,f.u5,a.Pc,U]}),i})()},3454:(Z,N,r)=>{r.d(N,{U:()=>m});var u=r(5861),f=r(6689),a=r(7852),v=r(6593);let m=(()=>{class _{constructor(o,e,l,g,T,S){this.alertCtrl=o,this.toastCtrl=e,this.loadingCtrl=l,this.modalCtrl=g,this.sanitizer=T,this.navCtrl=S,this.isLoading=!1}setLoader(){this.isLoading=!this.isLoading}showAlert(o,e,l){this.alertCtrl.create({header:e||"Authentication failed",message:o,buttons:l||["Okay"]}).then(g=>g.present())}showToast(o,e,l,g=3e3){var T=this;return(0,u.Z)(function*(){(yield T.toastCtrl.create({message:o,duration:g,color:e,position:l})).present()})()}errorToast(o,e=4e3){this.showToast(o||"No Internet Connection","danger","bottom",e)}successToast(o){this.showToast(o,"success","bottom")}showLoader(o,e){return this.isLoading||this.setLoader(),this.loadingCtrl.create({message:o,spinner:e||"bubbles"}).then(l=>{l.present().then(()=>{this.isLoading||l.dismiss().then(()=>{console.log("abort presenting")})})}).catch(l=>{console.log("show loading error: ",l)})}hideLoader(){return this.isLoading&&this.setLoader(),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(o=>console.log("error hide loader: ",o))}createModal(o){var e=this;return(0,u.Z)(function*(){const l=yield e.modalCtrl.create(o);yield l.present();const{data:g}=yield l.onWillDismiss();if(console.log(g),g)return g})()}modalDismiss(o){let e=o||null;console.log("data",e),this.modalCtrl.dismiss(e)}getIcon(o){switch(o.toLowerCase()){case"home":return"home-outline";case"work":return"briefcase-outline";default:return"location-outline"}}getSantizeUrl(o){return this.sanitizer.bypassSecurityTrustUrl(o)}apiErrorHandler(o){return o&&401==o.status&&o.error.error?(this.errorToast(o.error.error),this.navCtrl.navigateRoot("/login"),!1):o&&500==o.status&&o.error.error?(this.errorToast(o.error.error),!1):-1==o.status?(this.errorToast("Failed To Connect With Server"),!1):401==o.status?(this.errorToast("Unauthorized Request!"),localStorage.removeItem("token"),localStorage.removeItem("uid"),this.navCtrl.navigateRoot("/login"),!1):500==o.status?(this.errorToast("Something went wrong"),!1):422==o.status&&o.error.error?(this.errorToast(o.error.error),!1):(this.errorToast("Something went wrong"),!1)}show(o){var e=this;return(0,u.Z)(function*(){return e.isLoading=!0,yield e.loadingCtrl.create({message:o&&""!=o&&null!=o?o:"",spinner:"bubbles"}).then(l=>{l.present().then(()=>{e.isLoading||l.dismiss().then(()=>console.log("abort presenting"))})})})()}hide(){var o=this;return(0,u.Z)(function*(){return o.isLoading=!1,yield o.loadingCtrl.dismiss().then(()=>console.log("dismissed"))})()}}return _.\u0275fac=function(o){return new(o||_)(f.LFG(a.Br),f.LFG(a.yF),f.LFG(a.HT),f.LFG(a.IN),f.LFG(v.H7),f.LFG(a.SH))},_.\u0275prov=f.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);